<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Resumo ‚Äì RF Driver</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="theme/theme.css">
<link rel="stylesheet" href="theme/layout.css">
<link rel="stylesheet" href="theme/components.css">

<style>
body{
  min-height:100vh;
  background:radial-gradient(circle at top,#1a1a1a 0%,#000 60%);
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
.container{
  width:100%;
  max-width:620px;
  padding:30px;
  background:linear-gradient(145deg,rgba(20,20,20,.95),rgba(0,0,0,.85));
  border-radius:22px;
  box-shadow:0 0 40px rgba(255,215,120,.25);
}
h1{
  text-align:center;
  font-size:2rem;
  background:linear-gradient(90deg,#d4af37,#f5e28c,#c9a227);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.section{
  margin-top:20px;
}
.card{
  border:1px solid rgba(255,215,120,.2);
  border-radius:14px;
  padding:14px;
  margin-bottom:12px;
}
.card.highlight{
  border-color:#f5c542;
  background:rgba(245,197,66,.08);
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:10px;
}
.total{
  font-size:1.6rem;
  font-weight:bold;
  text-align:center;
  margin-top:20px;
}
.btn{
  width:100%;
  margin-top:12px;
}
.small{
  font-size:.85rem;
  color:#bbb;
}
</style>
</head>

<body>

<div class="container">

<h1>RF DRIVER</h1>

<div class="section card">
  <p><strong>Origem:</strong> <span id="origemTxt"></span></p>
  <p><strong>Destino:</strong> <span id="destinoTxt"></span></p>
  <p><strong>Valor base:</strong> R$ <span id="valorBaseTxt"></span></p>
</div>

<div class="section">
  <h3>Taxas adicionais</h3>

  <div class="grid">

    <label class="card">
      <input type="checkbox" id="idaVolta"> Ida e volta (+100%)
    </label>

    <label class="card">
      <input type="checkbox" id="saidaPraia"> üèñÔ∏è Sa√≠da de praia (+R$ 10)
      <div class="small">Domingos e feriados</div>
    </label>

    <label class="card">
      <input type="checkbox" id="feira"> Sa√≠da de feira (+R$ 5)
    </label>

    <label class="card">
      <input type="checkbox" id="excesso"> Excesso de passageiros (+R$ 10)
    </label>

    <label class="card">
      <input type="checkbox" id="animal"> Transporte de animal (+R$ 10)
    </label>

    <label class="card">
      <input type="checkbox" id="buscarLonge"> Buscar passageiro longe (+R$ 10)
    </label>

  </div>
</div>

<div class="section card">
  <div class="total">
    Total: R$ <span id="totalTxt"></span>
  </div>
</div>

<button class="btn btn-primary" id="btnWhats">
  üì≤ Enviar or√ßamento no WhatsApp
</button>

<button class="btn btn-secondary" onclick="App.go('destino.html')">
  ‚óÄ Voltar
</button>

</div>

<script src="core/global.js"></script>

<script>
/* ===============================
   PROTE√á√ÉO DE FLUXO
================================ */
const origem = App.get("origem");
const destino = App.get("destino");
let valorBase = Number(App.get("valorBase") || 0);

if(!origem || !destino || valorBase <= 0){
  App.go("index.html");
}

/* ===============================
   UI BASE
================================ */
origemTxt.textContent = origem;
destinoTxt.textContent = destino;
valorBaseTxt.textContent = valorBase.toFixed(2);

/* ===============================
   C√ÅLCULO
================================ */
function calcular(){
  let total = valorBase;

  if(idaVolta.checked) total *= 2;
  if(saidaPraia.checked) total += 10;
  if(feira.checked) total += 5;
  if(excesso.checked) total += 10;
  if(animal.checked) total += 10;
  if(buscarLonge.checked) total += 10;

  totalTxt.textContent = total.toFixed(2);
  return total;
}

/* ===============================
   UX ‚Äì HIGHLIGHT
================================ */
document.querySelectorAll("input").forEach(i=>{
  i.addEventListener("change",()=>{
    i.closest(".card")?.classList.toggle("highlight",i.checked);
    calcular();
  });
});

calcular();

/* ===============================
   WHATSAPP
================================ */
btnWhats.onclick = ()=>{
  const total = calcular();
  const msg = `
üöñ *RF DRIVER*

Origem: ${origem}
Destino: ${destino}
Valor base: R$ ${valorBase.toFixed(2)}

üí∞ *Total: R$ ${total.toFixed(2)}*
  `.trim();

  window.open(
    "https://wa.me/?text=" + encodeURIComponent(msg),
    "_blank"
  );
};
</script>

</body>
</html>